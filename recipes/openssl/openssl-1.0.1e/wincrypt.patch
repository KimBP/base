diff -urN a/crypto/ossl_typ.h b/crypto/ossl_typ.h
--- a/crypto/ossl_typ.h	2008-11-11 13:23:18.000000000 +0100
+++ b/crypto/ossl_typ.h	2013-10-09 21:28:52.399482901 +0200
@@ -97,6 +97,7 @@
 
 typedef struct asn1_pctx_st ASN1_PCTX;
 
+#include <windows.h>
 #ifdef OPENSSL_SYS_WIN32
 #undef X509_NAME
 #undef X509_EXTENSIONS
